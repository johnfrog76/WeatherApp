"use strict";(self.webpackChunkweather_app=self.webpackChunkweather_app||[]).push([[622],{"app.css":(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var i=n(81),a=n.n(i),s=n(645),o=n.n(s)()(a());o.push([e.id,"\n.container {\n  margin-top: 2rem;\n}\n\n.sr-only {\n  position: absolute;\n  left: -10000px;\n  top: auto;\n  width: 1px;\n  height: 1px;\n  overflow: hidden;\n}\n\n.greybg {\n  background-color: #f2f2f2; \n}\n\n.section-select-city {\n  position: relative;\n  width: 100%;\n}\n\n.section-select-city .suggest-city-inner {\n  position: relative;\n}\n\ninput[type=text]:focus-visible {\n  box-shadow: none;\n  outline: 2px solid #000;\n}\n\n.forecast-title-text {\n  margin-top: 1.5rem;\n}\n\n#submitSearch {\n  position: absolute;\n  top: 0;\n  left: 0.5rem;\n  z-index: 1;\n}\n\n#clearSearch {\n  position: absolute;\n  top: 0;\n  right: 0.5rem;\n  z-index: 1;\n}\n\n.table thead th:nth-child(3) {\n width: 55%;\n}\n\n#submitSearch:focus, #clearSearch:focus {\n  outline: 2px solid !important;\n  outline-offset: -7px !important;\n  box-shadow: none;\n}\n\n#submitSearch:focus + .suggest-city-control input {\n  padding-left: 55px;\n}\n\n.suggest-city-control input {\n  padding-left: 45px;\n}\n\n.empty-message {\n  text-align: center;\n}\n\n.btn-primary {\n  background-color: #006ee5;\n}\n\n.btn-secondary:focus-visible {\n  box-shadow: none;\n  outline: 2px solid #000;\n}\n\n.loading-indicator {\n  position: absolute;\n  z-index: 10;\n  top: 33vh;\n  left: 50%;\n}\n\n.modal.show {\n  top: 10vh;\n  display: block;\n  position: absolute;\n  z-index: inherit;\n}\n\n.modal.fade.show {\n  display: block;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color: rgba(0, 0, 0, 0.2);\n  position: fixed;\n  z-index: 5;\n}\n\n\n:focus {\n  outline: 2px dashed;\n}\n\n.suggest-city-control {\n  position: relative;\n  min-width: 200px;\n  flex: 1;\n}\n\n.suggest-city-control .dropdown-menu {\n  min-width: 200px;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n\n.dropdown-menu .btn.btn-link {\n  min-width: 100%;\n  text-align: left;\n}\n.dropdown-menu .btn.btn-link:focus {\n  box-shadow: none;\n  outline: 2px dashed;\n  outline-offset: -2px;\n}\n\ntd > .btn:focus-visible {\n  box-shadow: none;\n  outline: 2px solid #000;\n}\n\n.accordion {\n  display: flex;\n  justify-content: space-between;\n  cursor: pointer;\n}\n\n.accordion:focus {\n  outline: 0;\n}\n.accordion:focus-visible {\n  outline: 2px dashed #000;\n  outline-offset: 3px;\n}\n\n.current-condition {\n  font-size: 1.25rem;\n  font-weight: 600;\n}\n\n.weather {\n  text-align: center;\n}\n\n.weather .weather-title {\n  font-size: 2.5rem;\n}\n",""]);const r=o},"app.html":(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i='<template>\n  <require from="./app.css"></require>\n  <require from="./components/header/header"></require>\n  <require from="./components/empty-message/empty-message"></require>\n  <require from="./components/loading/loading"></require>\n  <require from="./components/temp-toggle/temp-toggle"></require>\n  <require from="./components/suggest-city/suggest-city"></require>\n  <require from="./components/weather-modal/weather-modal"></require>\n  <require from="./components/aria-live/aria-live"></require>\n  \n  <header></header>\n  \n  <weather-modal\n    current.bind="currentItem"\n    citychild.bind="city"\n    showmodal.bind="showModal"\n    hidemodal.call="hideModal()"\n    citychild.bind="city"\n  ></weather-modal>\n\n  <div class="container">\n    <div class="row">\n      <div class="col col-12">\n        <section class="section-select-city greybg p-5" aria-label="search city control">\n          <suggest-city\n            querycity.bind="queryCity"\n            citychild.bind="city"\n            queryresults.bind="queryResults"\n            querycities.call="queryCities($event)"\n            selectquerycity.call="selectQueryCity($event)"\n            trapkeys.call="trapKeys($event)"\n            clearfield.call="clearField($event)"\n            forecastchild.call="forecast($event)"\n          ></suggest-city>\n        </section>\n      </div>\n    </div>\n    <div class="row">\n      <div class="col-12">\n        <h1 class="forecast-title-text">Forecast <span if.bind="forcastlist.length !== 0 && cityResponse === city && queryCity === city">for ${city}</span></h1>\n      </div>\n    </div>\n  </div>\n\n  <div class="d-flex justify-content-center align-items-center container">\n    <loading if.bind="isLoading"></loading>\n    <table class="table table-hover" if.bind="!isLoading">\n      <thead>\n        <tr class="table-primary">\n          <th scope="col">Date and Time</th>\n          <th scope="col">\n            <temp-toggle \n              celcius.bind="showCelsius"\n              handleclick.call="toggleTempFormat()"\n            ></temp-toggle>\n          </th>\n          <th scope="col">Weather</th>\n          <th scope="col">Action</th>\n        </tr>\n      </thead>\n      <tbody id="empty-table-content">\n        <tr if.bind="forcastlist.length === 0">\n            <td colspan="4">\n              <empty-message class="empty-message" showmore.bind="emptyMesasageMore" message.bind="emptyMessage"></empty-message>\n            </td>\n        </tr>\n      </tbody>\n      <tbody repeat.for="item of nextSixDays" id.bind="\'day-\' + $index">\n          <tr if.bind="item.items.length > 0">\n            <td colspan="4">\n              <div tabindex="0" role="button" class="accordion" aria-expanded="${item.expanded}" aria-controls="day-${$index}" click.delegate="expandItem($event, $index)" keydown.delegate="expandItem($event, $index)">\n                <strong>${item.title}</strong>\n                <i if.bind="!item.expanded" class="fa fa-angle-down"></i>\n                <i if.bind="item.expanded" class="fa fa-angle-up"></i>\n              </div>\n            </td>\n          </tr>\n          <tr repeat.for="forecast of item.items" if.bind="item.expanded === true && item.items.length > 0">\n            <td scope="row">${forecast.dt_txt}</td>\n            <td>\n              <span if.bind="!showCelsius" class="fahrenheit">${ (1.8*(forecast.main.temp - 273) + 32).toFixed(0)}</span>\n              <span if.bind="showCelsius" class="celcius">${ (forecast.main.temp - 273.15).toFixed(0) }</span>\n            </td>\n            <td>\n              <span class="fa fa-sun" if.bind="forecast.weather[0].main === \'Clear\'"></span>\n              <span class="fa fa-cloud" if.bind="forecast.weather[0].main === \'Clouds\'"></span>\n              <span class="fa fa-tint" if.bind="forecast.weather[0].main === \'Rain\'"></span>\n              <span class="fa fa-snowflake" if.bind="forecast.weather[0].main === \'Snow\'"></span>\n              <span class="ml-2">${forecast.weather[0].main}</span>\n            </td>\n            <td>\n              <button click.delegate="handleModal($event, forecast.idx)"\n                      keydown.delegate="handleModal($event, forecast.idx)"\n                      class="btn btn-sm btn-primary">Details</button>\n            </td>\n          </tr>\n      </tbody>\n    </table> \n  </div>\n  <aria-live message.bind="ariaMessage"></aria-live>\n</template>\n'},"components/aria-live/aria-live.html":(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i='<template>\n  <div role="region" id="liveRegion1" class="sr-only" aria-live="assertive">\n    ${message}\n  </div>\n</template>\n'},"components/empty-message/empty-message.html":(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i='<template>\n  <div class="d-flex justify-content-center align-items-center">\n    <span>${message}</span>\n    <button if.bind="showmore" click.delegate="handleUserAction($event)" class="btn btn-link empty-user-action">Enter a city?</button>\n  </div>\n</template>\n'},"components/header/header.html":(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i='\n<template>\n  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">\n    <a class="navbar-brand" href="#">${message}</a>\n  </nav>\n\n</template>\n'},"components/loading/loading.html":(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i='<template>\n  <div class="loading-indicator">${message}</div>\n</template>\n'},"components/suggest-city/suggest-city.html":(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i='<template class="d-flex justify-content-center align-items-center suggest-city-inner">\n    <button class="btn btn-link" title="submit search" id="submitSearch" click.trigger="forecastchild($event)"\n        disabled.bind="querycity !== citychild || citychild === \'\'" type="button"><i class="fa fa-search"></i></button>\n    <div class="suggest-city-control">\n      <input class="form-control" type="text" value.bind="querycity" keyup.trigger="handleQueryCity($event)" placeholder="search cities">\n      <div class="dropdown-menu show" if.bind="queryresults.length > 0 && querycity.length > 0 && querycity !== citychild" class="results">\n        <span class="tabstop sr-only" id="tabstop1" keyup.trigger="trapkeys($event)" tabindex="0"></span>\n        <button repeat.for="result of queryresults" \n          click.delegate="handleSelectQueryCity($event)"\n          keyup.trigger="trapkeys($event)"\n          id="city-search-result-${$index}"\n          class="btn btn-link">\n          <span class="query-city">${result.city}</span>, <span class="query-state">${result.state}</span>\n        </button>\n        <span class="tabstop sr-only" id="tabstop2" keyup.trigger="trapkeys($event)" tabindex="0"></span>\n      </div>\n    </div>\n    <button class="btn btn-link" title="clear search" id="clearSearch" if.bind="querycity.length > 0"\n      type="button" click.delegate="clearfield($event)"><i class="fa fa-times"></i></button>\n</template>\n'},"components/temp-toggle/temp-toggle.html":(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i='<template>\n  <span\n  role="button"\n    tabindex="0"\n    class="column-title-f"\n    keydown.trigger="onTempClick($event)"\n    click.delegate="onTempClick($event)"\n  >${!celcius ?  \'&deg;F\' : \'&deg;C\'}</span>\n</template>\n'},"components/weather-modal/weather-modal.html":(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i='<template>\n  <div class="modal fade" class.bind="showmodal ? \'show\' : \'\'" tabindex="-1" click.delegate="hidemodal()" data-dismiss="modal">\n    <div class="modal" class.bind="showmodal ? \'show\' : \'\'"  tabindex="-1" role="dialog">\n      <span role="button" class="sr-only tabstop tabstop0" keyup.delegate="trapModalKeys($event)" tabindex="0">tabstop 0</span>\n      <div class="modal-dialog modal-lg" role="document">\n      <div class="modal-content">\n          <div class="modal-header">\n            <h5 class="modal-title">Weather for ${current.dt_txt}</h5>\n            <button type="button" class="close" click.delegate="hidemodal()" keyupclick.delegate="trapModalKeys($event)" data-dismiss="modal" aria-label="Close">\n              <span aria-hidden="true">&times;</span>\n            </button>\n          </div>\n          <div class="modal-body">\n            <div class="current-condition"> \n              <div class="weather">\n                <h1 class="weather-title">${ citychild } | ${current.weather[0].main}\n                  <span class="fa fa-sun" if.bind="current.weather[0].main === \'Clear\'"></span>\n                  <span class="fa fa-cloud" if.bind="current.weather[0].main === \'Clouds\'"></span>\n                  <span class="fa fa-tint" if.bind="current.weather[0].main === \'Rain\'"></span>\n                  <span class="fa fa-snowflake" if.bind="current.weather[0].main === \'Snow\'"></span>\n                </h1>\n                <span if.bind="!showCelsius" class="fahrenheit">${ (1.8*(current.main.temp - 273) + 32).toFixed(0)} &deg;F</span>\n                <span if.bind="showCelsius" class="celcius">${ (current.main.temp - 273.15).toFixed(0) } &deg;C</span>\n              </div>\n            </div>\n            <ul class="current-condition-list">\n              <li>humidity: <span>${current.main.humidity} %</span></li>\n              <li>feels_like: <span>${current.main.feels_like}</span>\n              </li>\n              <li>grnd_level: <span>${current.main.grnd_level}</span></li>\n              <li>pressure: <span>${current.main.pressure}</span></li>\n              <li>sea_level: <span>${current.main.sea_level}</span></li>\n              <li>temp_max: <span>${current.main.temp_max}</span></li>\n              <li>temp_min: <span>${current.main.temp_min}</span></li> \n              <li>wind direction: <span>${current.wind.deg}</span>\n                <span>${getWindDirection(current.wind.deg)}</span>\n                <span class="fa fa-arrow-right" style.bind="\'transform: rotate(\' + (90 + current.wind.deg) +\'deg)\'"></span>\n              </li>\n              <li>wind gust: <span>${current.wind.gust}</span></li>\n              <li>wind speed: <span>${current.wind.speed}</span></li>  \n            </ul>\n            \n          </div>\n          <div class="modal-footer">\n            <button type="button" class="btn btn-secondary" click.delegate="hidemodal()" data-dismiss="modal">Close</button>\n          </div>\n        </div>\n      </div>\n      <span role="button" class="sr-only tabstop tabstop1" keyup.delegate="trapModalKeys($event)" tabindex="0">tabstop 1</span>\n    </div>\n  </div>\n</template>\n'},app:(e,t,n)=>{n.r(t),n.d(t,{App:()=>c});var i=n(655),a=n(139),s=n("aurelia-framework"),o=function(){function e(e){this.httpClient=e,this.httpClient.configure((function(e){e.withBaseUrl("https://api.openweathermap.org/data/2.5/")}))}return e.prototype.getForecast=function(e){var t=this;return new Promise((function(n,i){t.httpClient.get("forecast?q="+e+"&appid=5f869c4127815ee4eb1ed4c0c8670b44").then((function(e){var t=JSON.parse(e.response);setTimeout((function(){n(t)}),1500)})).catch((function(e){i(e)}))}))},(0,i.gn)([s.autoinject,(0,i.w6)("design:paramtypes",[a.eN])],e)}(),r=n(837),l=n(493),c=function(){function e(e){this.weatherService=e,this.city="",this.cityResponse="",this.queryCity="",this.queryResults=[],this.city_list=[],this.ariaMessage="",this.forcastlist=[],this.isLoading=!0,this.showCelsius=!0,this.emptyMessage="there is no weather data.",this.emptyMesasageMore=!0,this.showModal=!1,this.currentItem={},this.hasError=!1,this.errorMesage="",this.nextSixDays=[]}return e.prototype.liveAriaMessage=function(e,t){var n=this;void 0===t&&(t=1e4),this.ariaMessage=e,setTimeout((function(){n.ariaMessage=""}),t)},e.prototype.activate=function(){this.city_list=r,this.isLoading=!1},e.prototype.queryCities=function(e){var t=this;this.queryCity=e.target.value;var n=this.city_list.filter((function(e){return-1!==e.city.toLowerCase().indexOf(t.queryCity.toLowerCase())}));return n.length>0&&n.length<10?this.queryResults=n.slice(0):this.queryResults=[],!0},e.prototype.expandItem=function(e,t){if(("keydown"!==e.type||"enter"!==(null==e?void 0:e.code.toLowerCase()))&&"click"!==e.type)return!0;this.nextSixDays=this.nextSixDays.map((function(e,n){return t===n?(0,i.pi)((0,i.pi)({},e),{expanded:!e.expanded}):(0,i.pi)((0,i.pi)({},e),{expanded:!1})}))},e.prototype.trapKeys=function(e){var t=e.target;if("BUTTON"===t.tagName&&"escape"===e.code.toLowerCase())return e.target.closest(".suggest-city-control").children[0].focus(),!0;if("SPAN"===t.tagName){var n=t.parentElement.getElementsByTagName("BUTTON"),i=n[0],a=n[n.length-1];"tab"===e.code.toLowerCase()&&"keyup"===e.type&&("tabstop1"===e.target.id&&!0===e.shiftKey?a.focus():i.focus())}return!0},e.prototype.selectQueryCity=function(e){e.preventDefault();var t,n=document.querySelector(".suggest-city-control > input");t="SPAN"===e.target.tagName?e.target.parentElement.children[0].innerText:e.target.children[0].innerText,setTimeout((function(){n.focus()}),500),this.queryResults=[],this.queryCity="",this.queryCity=t,this.city=t},e.prototype.handleModal=function(e,t){("keydown"===e.type&&"enter"===e.key.toLowerCase()||"click"===e.type)&&(this.currentItem=this.forcastlist[t||0],this.showModal=!0,setTimeout((function(){document.querySelector(".close").focus()})))},e.prototype.hideModal=function(){this.showModal=!1},e.prototype.clearField=function(e){var t=document.querySelector(".suggest-city-control input");t&&t.focus(),this.city="",this.queryCity="",this.queryResults=[],this.forcastlist=[],this.nextSixDays=[]},e.prototype.toggleTempFormat=function(){this.showCelsius=!this.showCelsius},e.prototype.forecast=function(e){var t=this;e.preventDefault();var n=this.city;this.isLoading=!0,this.weatherService.getForecast(n).then((function(e){var a,s;t.cityResponse=e.city.name,t.forcastlist=e.list.map((function(e,t){var n=new Date(1e3*e.dt);return(0,i.pi)((0,i.pi)({},e),{idx:t,dt_txt:l.Z.format(n,"hh:mm A")})})),t.liveAriaMessage("forecast has loaded for ".concat(n),5e3),t.isLoading=!1,t.showCelsius=!1,t.nextSixDays=(a=t.forcastlist,(s=[]).length=6,s.fill(!1),(s=s.map((function(e,t){return 0===t?(new Date).setHours(0,0,0,0):(new Date).setHours(24*t,0,0,0)}))).map((function(e,t,n){var i,s=new Date(e);return i=t<n.length-1?a.filter((function(i){return 1e3*i.dt>e&&1e3*i.dt<n[t+1]})):a.filter((function(t){return 1e3*t.dt>e})),{dt:e,title:l.Z.format(s,"dddd, MMMM DD"),items:i,expanded:0===t}}))),console.log(t.nextSixDays)})).then((function(e){})).catch((function(e){console.error(e),t.isLoading=!1}))},(0,i.gn)([(0,s.inject)(o),(0,i.w6)("design:paramtypes",[o])],e)}()},"components/aria-live/aria-live":(e,t,n)=>{n.r(t),n.d(t,{AriaLive:()=>s});var i=n(655),a=n("aurelia-framework"),s=function(){function e(){}return(0,i.gn)([a.bindable,(0,i.w6)("design:type",String)],e.prototype,"message",void 0),e}()},"components/empty-message/empty-message":(e,t,n)=>{n.r(t),n.d(t,{EmptyMessage:()=>s});var i=n(655),a=n("aurelia-framework"),s=function(){function e(){}return e.prototype.activate=function(){},e.prototype.handleUserAction=function(e){e.preventDefault();try{document.querySelector(".suggest-city-control > input").focus()}catch(e){console.error("unable to focus button")}},(0,i.gn)([a.bindable,(0,i.w6)("design:type",String)],e.prototype,"message",void 0),(0,i.gn)([a.bindable,(0,i.w6)("design:type",Boolean)],e.prototype,"showmore",void 0),e}()},"components/header/header":(e,t,n)=>{n.r(t),n.d(t,{Header:()=>i});var i=function(){this.message="WeatherApp"}},"components/loading/loading":(e,t,n)=>{n.r(t),n.d(t,{Loading:()=>i});var i=function(){this.message="Loading..."}},"components/suggest-city/suggest-city":(e,t,n)=>{n.r(t),n.d(t,{SuggestCity:()=>s});var i=n(655),a=n("aurelia-framework"),s=function(){function e(){}return e.prototype.handleSelectQueryCity=function(e){e.preventDefault(),this.selectquerycity(e)},e.prototype.handleQueryCity=function(e){e.preventDefault(),this.querycity===this.citychild&&""!==this.citychild?"enter"===e.key.toLowerCase()&&this.forecastchild(e):this.querycities(e)},(0,i.gn)([a.bindable,(0,i.w6)("design:type",String)],e.prototype,"citychild",void 0),(0,i.gn)([a.bindable,(0,i.w6)("design:type",String)],e.prototype,"querycity",void 0),(0,i.gn)([a.bindable,(0,i.w6)("design:type",Array)],e.prototype,"queryresults",void 0),(0,i.gn)([a.bindable,(0,i.w6)("design:type",Function)],e.prototype,"querycities",void 0),(0,i.gn)([a.bindable,(0,i.w6)("design:type",Function)],e.prototype,"trapkeys",void 0),(0,i.gn)([a.bindable,(0,i.w6)("design:type",Function)],e.prototype,"selectquerycity",void 0),(0,i.gn)([a.bindable,(0,i.w6)("design:type",Function)],e.prototype,"clearfield",void 0),(0,i.gn)([a.bindable,(0,i.w6)("design:type",Function)],e.prototype,"forecastchild",void 0),e}()},"components/temp-toggle/temp-toggle":(e,t,n)=>{n.r(t),n.d(t,{TempToggle:()=>s});var i=n(655),a=n("aurelia-framework"),s=function(){function e(){}return e.prototype.onTempClick=function(e){if("click"!==e.type&&("keydown"!==e.type||"enter"!==e.key.toLowerCase()))return!0;this.handleclick()},(0,i.gn)([a.bindable,(0,i.w6)("design:type",Boolean)],e.prototype,"celcius",void 0),(0,i.gn)([a.bindable,(0,i.w6)("design:type",Function)],e.prototype,"handleclick",void 0),e}()},"components/weather-modal/weather-modal":(e,t,n)=>{n.r(t),n.d(t,{WeatherModal:()=>s});var i=n(655),a=n("aurelia-framework"),s=function(){function e(){this.keyboardTrap={modalEle:null,tabStopEles:null,tabEles:null}}return e.prototype.trapModalKeys=function(e){var t=e.target;return this.keyboardTrap.modalEle,null===this.keyboardTrap.modalEle&&(this.keyboardTrap.modalEle=t.closest(".modal"),this.keyboardTrap.tabStopEles=this.keyboardTrap.modalEle.querySelectorAll(".tabstop"),this.keyboardTrap.tabEles=this.keyboardTrap.modalEle.querySelectorAll('button, a, input, textarea, [tabindex="0"]')),"keyup"===e.type&&"tab"===e.code.toLowerCase()&&(t.classList.contains("tabstop0")?(this.keyboardTrap.tabEles[this.keyboardTrap.tabEles.length-1].focus(),console.log("tabstop 0 focus")):t.classList.contains("tabstop1")&&(this.keyboardTrap.tabEles[0].focus(),console.log("tabstop 1 focus"))),!0},e.prototype.getWindDirection=function(e){var t="";return 0===e||360===e?t="N":90===e?t="E":180===e?t="S":270===e?t="W":e>0&&e<90?t="NE":e>90&&e<180?t="SE":e>180&&e<270?t="SW":e>270&&e<360&&(t="NW"),t},(0,i.gn)([a.bindable,(0,i.w6)("design:type",Object)],e.prototype,"current",void 0),(0,i.gn)([a.bindable,(0,i.w6)("design:type",String)],e.prototype,"citychild",void 0),(0,i.gn)([a.bindable,(0,i.w6)("design:type",Boolean)],e.prototype,"showmodal",void 0),(0,i.gn)([a.bindable,(0,i.w6)("design:type",Function)],e.prototype,"hidemodal",void 0),e}()},main:(e,t,n)=>{n.d(t,{configure:()=>a});const i=JSON.parse('{"f":false,"K":false}');function a(e){e.use.standardConfiguration().feature("resources/index"),e.use.developmentLogging(i.f?"debug":"warn"),i.K&&e.use.plugin("aurelia-testing"),e.start().then((function(){return e.setRoot("app")}))}n(15)},"resources/index":(e,t,n)=>{function i(e){}n.r(t),n.d(t,{configure:()=>i})}}]);