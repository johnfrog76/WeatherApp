<template>
  <require from="./app.css"></require>
  <require from="./components/header/header"></require>
  <require from="./components/empty-message/empty-message"></require>
  <require from="./components/loading/loading"></require>
  <require from="./components/temp-toggle/temp-toggle"></require>
  <header></header>
  
  <div class="d-flex justify-content-center align-items-center container">
    <div class="row">
      <div class="text-center">
        <form class="form-inline my-2 my-lg-0" submit.delegate = "forecast()" _lpchecked="1">
          <button class="btn btn-secondary mr-2" type="button" click.delegate="clearField($event)">Clear</button>
          <input class="form-control mr-sm-2" type="text" value.bind = "city" placeholder="Ex: Seattle">
          <button class="btn btn-primary my-2 my-sm-0" type="submit">Search</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Add a table to display the forecast -->
  <div class="d-flex justify-content-center align-items-center container">
    <loading if.bind="isLoading"></loading>
    <table class="table table-hover" if.bind="!isLoading">
      <thead>
        <tr class="table-primary">
          <th scope="col">Date and Time</th>
          <!-- <th scope="col">Temperature (K)</th> -->
          <th scope="col">
            <temp-toggle celcius.bind="showCelsius" handleclick.call="toggleTempFormat()"></temp-toggle>
          </th>
          <th scope="col">Humidity %</th>
          <th scope="col">Weather (Rain, Snow, Extreme etc.)</th>
        </tr>
      </thead>
      <tbody>
        <tr if.bind="forcastlist.length === 0">
            <td colspan="4">
              <empty-message class="empty-message" showmore.bind="emptyMesasageMore" message.bind="emptyMessage"></empty-message>
            </td>
        </tr>
        <tr class="table-dark" repeat.for="item of forcastlist">
          <th scope="row">${item.dt_txt}</th>
          <td>
            <span if.bind="!showCelsius" class="fahrenheit">${ (1.8*(item.main.temp - 273) + 32).toFixed(0)}</span>
            <span if.bind="showCelsius" class="celcius">${ (item.main.temp - 273.15).toFixed(2) }</span>
          </td>
          <td>${item.main.humidity}</td>
          <td>
            <span class="fa fa-sun" if.bind="item.weather[0].main === 'Clear'"></span>
            <span class="fa fa-cloud" if.bind="item.weather[0].main === 'Clouds'"></span>
            <span class="fa fa-tint" if.bind="item.weather[0].main === 'Rain'"></span>
            <span class="ml-2">${item.weather[0].main}</span>
          </td>
        </tr>
      </tbody>
    </table> 
  </div>
</template>
